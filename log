Started by user S B
Building in workspace /Users/Shared/Jenkins/Home/workspace/Pokemon-release
Wiping out workspace first.
Cloning the remote Git repository
Cloning repository https://github.com/sbb4528/pokemon.git
 > git init /Users/Shared/Jenkins/Home/workspace/Pokemon-release # timeout=10
Fetching upstream changes from https://github.com/sbb4528/pokemon.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/sbb4528/pokemon.git +refs/heads/*:refs/remotes/origin/*
 > git config remote.origin.url https://github.com/sbb4528/pokemon.git # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git config remote.origin.url https://github.com/sbb4528/pokemon.git # timeout=10
Cleaning workspace
 > git rev-parse --verify HEAD # timeout=10
No valid HEAD. Skipping the resetting
 > git clean -fdx # timeout=10
Fetching upstream changes from https://github.com/sbb4528/pokemon.git
 > git fetch --tags --progress https://github.com/sbb4528/pokemon.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision c161f69cda2768d9a766280f7d2270f7569a4449 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f c161f69cda2768d9a766280f7d2270f7569a4449
 > git branch -a -v --no-abbrev # timeout=10
 > git checkout -b master c161f69cda2768d9a766280f7d2270f7569a4449
 > git rev-list de62b3dd2d0d2090fe6b6cad61fd4d3ed4b3548e # timeout=10
Parsing POMs
Established TCP socket on 50030
[Pokemon-release] $ java -cp /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven33-agent-1.8.1.jar:/Users/Shared/Jenkins/Home/tools/hudson.tasks.Maven_MavenInstallation/maven/boot/plexus-classworlds-2.5.2.jar:/Users/Shared/Jenkins/Home/tools/hudson.tasks.Maven_MavenInstallation/maven/conf/logging jenkins.maven3.agent.Maven33Main /Users/Shared/Jenkins/Home/tools/hudson.tasks.Maven_MavenInstallation/maven /Users/Shared/Jenkins/Home/war/WEB-INF/lib/remoting-3.2.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven33-interceptor-1.8.1.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-commons-1.8.1.jar 50030
<===[JENKINS REMOTING CAPACITY]===>channel started
Executing Maven:  -B -f /Users/Shared/Jenkins/Home/workspace/Pokemon-release/pom.xml -DdevelopmentVersion=1.5-SNAPSHOT -DreleaseVersion=1.4 -Dresume=false release:prepare
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building demo-war Maven Webapp 1.5-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-release-plugin:2.5.2:prepare (default-cli) @ demo-war ---
[INFO] Verifying that there are no local modifications...
[INFO]   ignoring changes on: **/pom.xml.releaseBackup, **/pom.xml.next, **/pom.xml.tag, **/pom.xml.branch, **/release.properties, **/pom.xml.backup
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git rev-parse --show-toplevel
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git status --porcelain .
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[WARNING] Ignoring unrecognized line: ?? release.properties
[INFO] Checking dependencies and plugins for snapshots ...
[INFO] Transforming 'demo-war Maven Webapp'...
[INFO] Not generating release POMs
[INFO] Executing goals 'clean verify'...
[INFO] [INFO] Scanning for projects...
[INFO] [INFO]                                                                         
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building demo-war Maven Webapp 1.4
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] 
[INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ demo-war ---
[INFO] [INFO] 
[INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo-war ---
[INFO] [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] [INFO] skip non existing resourceDirectory /Users/Shared/Jenkins/Home/workspace/Pokemon-release/src/main/resources
[INFO] [INFO] 
[INFO] [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ demo-war ---
[INFO] [INFO] No sources to compile
[INFO] [INFO] 
[INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ demo-war ---
[INFO] [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] [INFO] skip non existing resourceDirectory /Users/Shared/Jenkins/Home/workspace/Pokemon-release/src/test/resources
[INFO] [INFO] 
[INFO] [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ demo-war ---
[INFO] [INFO] No sources to compile
[INFO] [INFO] 
[INFO] [INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ demo-war ---
[INFO] [INFO] No tests to run.
[INFO] [INFO] 
[INFO] [INFO] --- maven-war-plugin:2.2:war (default-war) @ demo-war ---
[INFO] [INFO] Packaging webapp
[INFO] [INFO] Assembling webapp [demo-war] in [/Users/Shared/Jenkins/Home/workspace/Pokemon-release/target/x]
[INFO] [INFO] Processing war project
[INFO] [INFO] Copying webapp resources [/Users/Shared/Jenkins/Home/workspace/Pokemon-release/src/main/webapp]
[INFO] [INFO] Webapp assembled in [64 msecs]
[INFO] [INFO] Building war: /Users/Shared/Jenkins/Home/workspace/Pokemon-release/target/x.war
[INFO] [INFO] WEB-INF/web.xml already added, skipping
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] BUILD SUCCESS
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 1.250 s
[INFO] [INFO] Finished at: 2017-02-27T10:55:22-08:00
[INFO] [INFO] Final Memory: 11M/245M
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] Checking in modified POMs...
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git add -- pom.xml
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git rev-parse --show-toplevel
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git status --porcelain .
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[WARNING] Ignoring unrecognized line: ?? pom.xml.releaseBackup
[WARNING] Ignoring unrecognized line: ?? release.properties
[WARNING] Ignoring unrecognized line: ?? target/
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git commit --verbose -F /var/folders/6v/xnkxmbjj5kg5lsbgt0_v17sm000086/T/maven-scm-666128358.commit pom.xml
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git symbolic-ref HEAD
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git push git@github.com:sbb4528/pokemon.git refs/heads/master:refs/heads/master
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] Tagging release with the label demo-war-1.4...
[INFO] Executing: /bin/sh -c cd /Users/Shared/Jenkins/Home/workspace/Pokemon-release && git tag -F /var/folders/6v/xnkxmbjj5kg5lsbgt0_v17sm000086/T/maven-scm-1503714111.commit demo-war-1.4
[INFO] Working directory: /Users/Shared/Jenkins/Home/workspace/Pokemon-release
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7.658 s
[INFO] Finished at: 2017-02-27T10:55:25-08:00
[INFO] Final Memory: 18M/304M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.5.2:prepare (default-cli) on project demo-war: Unable to tag SCM
[ERROR] Provider message:
[ERROR] The git-tag command failed.
[ERROR] Command output:
[JENKINS] Archiving /Users/Shared/Jenkins/Home/workspace/Pokemon-release/pom.xml to org.jenkinsci.plugins.workflow.demo/demo-war/1.5-SNAPSHOT/demo-war-1.5-SNAPSHOT.pom
[ERROR] fatal: tag 'demo-war-1.4' already exists
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
channel stopped
[Pokemon-release] $ /bin/sh -xe /Users/Shared/Jenkins/tmp/hudson752672787648534561.sh
+ mvn=/usr/local/bin/mvn
++ /usr/local/bin/mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.version -f pom.xml.releaseBackup
++ egrep -v '^\[|Downloading:'
++ tr -d ' \n'
++ awk -F-SNAPSHOT '{print $1}'
+ version=1.5
++ cat /Users/Shared/Jenkins/pom_version.txt
+ oldversion=1.3
+ '[' 1.5 == 1.3 ']'
+ echo 'New Version Released ! Creating PR request'
New Version Released ! Creating PR request
+ curl -O https://raw.githubusercontent.com/sbb4528/repos_list/master/repos
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
100    37  100    37    0     0     15      0  0:00:02  0:00:02 --:--:--    15
+ cat repos
+ read output
+ git clone git@github.com:sbb4528/mavenrepo.git
Cloning into 'mavenrepo'...
+ cd mavenrepo
+ git branch develop_1.5
+ git branch -l
  develop_1.5
* master
+ git checkout develop_1.5
Switched to branch 'develop_1.5'
+ grep -A1 pokemon pom.xml
++ cat input.txt
++ head -n 1
++ tr -d '[:space:]'
+ start='<artifactId>pokemon</artifactId>'
++ cat input.txt
++ tail -n 1
++ tr -d '[:space:]'
+ end='<version>3.8.1</version>'
++ echo '<version>3.8.1</version>'
++ cut '-d>' -f2
++ cut '-d<' -f1
+ oldversion=3.8.1
+ string='<version>1.5</version>'
+ echo '<version>1.5</version>' '<artifactId>pokemon</artifactId>' '<version>3.8.1</version>'
<version>1.5</version> <artifactId>pokemon</artifactId> <version>3.8.1</version>
+ /usr/local/bin/mvn versions:set -DgroupId=com.pokemnrepo -DartifactId=pokemon -DoldVersion= -DnewVersion=1.5
[INFO] Scanning for projects...
[ERROR] [ERROR] Some problems were encountered while processing the POMs:
[ERROR] Malformed POM /Users/Shared/Jenkins/Home/workspace/Pokemon-release/mavenrepo/pom.xml: Unrecognised tag: 'plugin' (position: START_TAG seen ...</finalName>\n  </build>\n<plugin>... @21:9)  @ /Users/Shared/Jenkins/Home/workspace/Pokemon-release/mavenrepo/pom.xml, line 21, column 9
 @ 
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project org.jenkinsci.plugins.workflow.demo:demo-war:1.7-SNAPSHOT (/Users/Shared/Jenkins/Home/workspace/Pokemon-release/mavenrepo/pom.xml) has 1 error
[ERROR]     Malformed POM /Users/Shared/Jenkins/Home/workspace/Pokemon-release/mavenrepo/pom.xml: Unrecognised tag: 'plugin' (position: START_TAG seen ...</finalName>\n  </build>\n<plugin>... @21:9)  @ /Users/Shared/Jenkins/Home/workspace/Pokemon-release/mavenrepo/pom.xml, line 21, column 9 -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/ModelParseException
Build step 'Execute shell' marked build as failure
Finished: FAILURE
